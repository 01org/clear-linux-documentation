




<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Install Clear Linux over the network with iPXE</title>
  

<link rel="icon" type="image/png" sizes="192x192" href="/sites/all/themes/custom/clearlinux_theme/images/favicons/favicon_android_192x192.png" />
<link rel="apple-touch-icon" sizes="180x180" href="/sites/all/themes/custom/clearlinux_theme/images/favicons/favicon_apple_180x180.png" />
<link rel="apple-touch-icon" sizes="152x152" href="/sites/all/themes/custom/clearlinux_theme/images/favicons/favicon_apple_152x152.png" />
<link rel="icon" type="image/png" sizes="32x32" href="/sites/all/themes/custom/clearlinux_theme/images/favicons/favicon_web_32x32.png" />
<link rel="icon" type="image/png" sizes="96x96" href="/sites/all/themes/custom/clearlinux_theme/images/favicons/favicon_web_96x96.png" />
<meta name="google-site-verification" content="xDIK6ZRF9BKNIeBUstAHF3zS6bpi2eCjBHemCQAEH8o" />
<meta name="msapplication-TileImage" href="sites/all/themes/custom/clearlinux_theme/images/favicons/favicon_microsoft_144x144.png" />
<meta name="theme-color" content="#7DD2F7" />
<link rel="icon" type="image/png" sizes="16x16" href="/sites/all/themes/custom/clearlinux_theme/images/favicons/favicon_web_16x16.png" />
<link rel="apple-touch-icon" sizes="144x144" href="/sites/all/themes/custom/clearlinux_theme/images/favicons/favicon_apple_144x144.png" />
<link rel="apple-touch-icon" sizes="120x120" href="/sites/all/themes/custom/clearlinux_theme/images/favicons/favicon_apple_120x120.png" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<link rel="shortcut icon" href="/sites/all/themes/custom/clearlinux_theme/favicon.ico" type="image/vnd.microsoft.icon" />
<link rel="apple-touch-icon" sizes="57x57" href="/sites/all/themes/custom/clearlinux_theme/images/favicons/favicon_apple_57x57.png" />
<link rel="apple-touch-icon" sizes="76x76" href="/sites/all/themes/custom/clearlinux_theme/images/favicons/favicon_apple_76x76.png" />
<link rel="apple-touch-icon" sizes="72x72" href="/sites/all/themes/custom/clearlinux_theme/images/favicons/favicon_apple_72x72.png" />
<link rel="apple-touch-icon" sizes="60x60" href="/sites/all/themes/custom/clearlinux_theme/images/favicons/favicon_apple_60x60.png" />
<link rel="apple-touch-icon" sizes="114x114" href="/sites/all/themes/custom/clearlinux_theme/images/favicons/favicon_apple_114x114.png" />

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/main.css" type="text/css" />
  

  

  

    <link rel="stylesheet" href="/sites/all/themes/custom/clearlinux_theme/css/main.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/overrides.css" type="text/css" />
        <link rel="index" title="Index"
              href="../../../genindex.html"/>
        <link rel="search" title="Search" href="../../../search.html"/>
    <link rel="top" title="Documentation for Clear Linux* Project for Intel(r) Architecture" href="../../../index.html"/>
        <link rel="up" title="Network guide" href="network.html"/>
        <link rel="next" title="Send packages between platforms" href="dpdk.html"/>
        <link rel="prev" title="Network guide" href="network.html"/>
     
    <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">
  

  
  <script src="/sites/all/themes/custom/clearlinux_theme/js/modernizr.custom.19994.js"></script>

</head>

<body role="document" class="section-documentation">
  <div id="wrapper">
  <header>
    <div id="o1-header">
      <div class="o1-logo-container hidden-xs">
        <div class="container"><a href="http://01.org" class="o1-logo ext" target="_blank"></a></div>
      </div>
      <div class="project-header container clearfix">
        <div class="left inline">
          <a href="/" id="project-name">
            <span id="project-name-left">Clear Linux&nbsp; <sup>*</sup></span>
            <span id="project-name-right">Project</span>
            <span id="project-name-bottom">for Intel* Architecture</span>
          </a>
        </div>
        <div class="right">
          <div class="mobile-menu"></div>
            <div class="region region-header">
              <div id="block-system-main-menu" class="block block-system block-menu">
                <ul class="menu">
                  <li class="first leaf"><a href="https://download.clearlinux.org" title="Downloads" target="_blank">Downloads</a></li>
                  <li class="collapsed"><a href="/features" title="Features">Features</a></li>
                  <li class="collapsed"><a href="/documentation" title="Documentation" class="active">Documentation</a></li>
                </ul>
              </div>
              <div id="block-menu-menu-get-involved" class="block block-menu">
                <h4>Get Involved</h4>
                <ul class="menu">
                  <li class="first leaf"><a href="http://freenode.net/" target="_blank">IRC #clearlinux</a></li>
                  <li class="leaf"><a href="https://lists.clearlinux.org/mailman/listinfo/dev">Mailing list</a></li>
                  <li class="last leaf"><a href="/blogs">Blogs</a></li>
                </ul>
              </div>
            </div>
                    <ul class="nav-tools">
            <li><a href="/search"><i class="fa fa-search"></i></a></li>
            <!--<li><i class="fa fa-mail-forward"></i></li>-->
          </ul>
        </div>
      </div>
    </div>
</header>
      
      <div class="main-content">
        <div id="site-breadcrumb">
            <div class="container">





<div id="site-breadcrumb">
  <h2 class="element-invisible"></h2>
  <div class="breadcrumb">
    <a href="/">Home</a> » <a href="../../../index.html">Documentation</a> » Install Clear Linux over the network with iPXE
  </div>
</div></div>
          </div>
        <div class="container clearfix">
          <div class="row">
           <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
            <div class="region region-content">
              <div class="content">
                <div class="container-fluid">
                  <div class="row">
                    <div class="col-md-4 col-sm-4 col-xs-12">
                      <div class="row"><div class="col-md-12 col-sm-12 col-xs-12"><sidebar>
  <h2>Content Map</h2>
      
      
      
      
      
      
      
      
      <ul class="custom-dropdown-menu">
<li class="menu-item-open parent-item"><a class="reference internal" href="../../clear-linux.html">Clear Linux* Project for Intel® Architecture</a><ul class="custom-dropdown-menu">
<li class="child-item first-level no-childs"><a class="reference internal" href="../../get-started/get-started.html">Get started</a></li>
<li class="child-item first-level no-childs"><a class="reference internal" href="../../concepts/concepts.html">Concepts</a></li>
<li class="child-item first-level no-childs"><a class="reference internal" href="../guides.html">Guides</a></li>
<li class="child-item first-level no-childs"><a class="reference internal" href="../../tutorials/tutorials.html">Tutorials</a></li>
<li class="child-item first-level no-childs"><a class="reference internal" href="../../reference/reference.html">Reference</a></li>
</ul>
</li>
<li class="menu-item-closed parent-item"><a class="reference internal" href="../../../clear-containers/clear-containers.html">Intel® Clear Containers</a><ul class="custom-dropdown-menu">
<li class="child-item first-level no-childs"><a class="reference internal" href="../../../clear-containers/getting-started.html">Clear Containers getting started guide</a></li>
<li class="child-item first-level no-childs"><a class="reference internal" href="../../../clear-containers/architecture-overview.html">Architecture Overview</a></li>
</ul>
</li>
</ul>

</sidebar></div></div>
                      <div class="row"><div class="col-md-12 col-sm-12 col-xs-12">
<br />
<div id="searchbox" role="search">
  <h2>Quick Search</h2>
  <form class="search" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
    <input type="submit" value="Go" class="pull-right">
  </form>
</div></div></div>
                    </div>
                    <div class="col-md-8 col-sm-8 col-xs-12">
  <div class="section" id="install-clear-linux-over-the-network-with-ipxe">
<span id="ipxe-install"></span><h1>Install Clear Linux over the network with iPXE</h1>
<p>This guide shows how to install Clear Linux through <abbr title="Pre-boot Execution Environment">PXE</abbr>.</p>
<p>PXE is an industry standard describing the client-server interaction with network-boot software using
the DHCP and TFTP protocols. This guide shows one possible use of this
environment to automatically install Clear Linux.</p>
<p>The PXE extension known as <a class="reference external" href="http://ipxe.org/">iPXE</a>* adds support for additional protocols
such as HTTP, <abbr title="Internet Small Computer Systems Interface">iSCSI</abbr>, <abbr title="ATA over Ethernet">AoE</abbr>, and
<abbr title="Fiber Channel over Ethernet">FCoE</abbr>. iPXE can also be used to enable
network booting on computers which lack built-in PXE support.</p>
<p>Figure 1 depicts the flow of information between a PXE server and a PXE
client we must create to install Clear Linux through iPXE.</p>
<div class="figure" id="id1">
<img alt="PXE information flow" src="../../../_images/network-boot-flow.png" />
<p class="caption"><span class="caption-text">Figure 1: PXE information flow</span></p>
</div>
<div class="admonition caution">
<p class="first admonition-title">Caution</p>
<p class="last">The Clear Linux image that boots through the PXE process automatically erases all data and partitions on the PXE client system and
creates 3 new partitions to install onto.</p>
</div>
<div class="section" id="prerequisites">
<h2>Prerequisites</h2>
<p>Before booting with iPXE, the following preparations must be made:</p>
<ul class="simple">
<li>Your PXE server has an Ethernet/LAN boot option.</li>
<li>Your PXE server has at least two network adapters.</li>
<li>Your PXE server is connected to a public network.</li>
<li>Your PXE server and PXE clients are connected to a switch on a private
network.</li>
<li>Your PXE server has the secure boot option disabled.</li>
<li>Your PXE clients have a boot order where the network boot option is
prioritized before the disk boot option.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <code class="docutils literal"><span class="pre">Secure</span> <span class="pre">Boot</span></code> option in the BIOS must be disabled because the UEFI binaries used to
boot Clear Linux are not signed.</p>
</div>
<p>The required computer and network setup is shown in figure 2.</p>
<div class="figure" id="id2">
<img alt="NAT network topology" src="../../../_images/network-boot-setup.png" />
<p class="caption"><span class="caption-text">Figure 2: NAT network topology</span></p>
</div>
</div>
<div class="section" id="configuration">
<h2>Configuration</h2>
<p>The configuration process to install Clear Linux using iPXE has been automated with
the <code class="file docutils literal"><span class="pre">configure-ipxe.sh</span></code> script included with
<abbr title="Ister Cloud Init Service">ICIS</abbr>, thus quickly enabling a bulk
provisioning setup. For additional instructions on how to get started with the
script, refer to the guide on the <a class="reference external" href="https://github.com/clearlinux/ister-cloud-init-svc">ICIS GitHub repository</a>. Otherwise, to
setup manually, follow the steps below.</p>
<ol class="arabic">
<li><p class="first">Define the variables used to parameterize the configuration of an iPXE
boot.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">ipxe_app_name=ipxe</span>
<span class="go">ipxe_port=50000</span>
<span class="go">web_root=/var/www</span>
<span class="go">ipxe_root=$web_root/$ipxe_app_name</span>
<span class="go">tftp_root=/srv/tftp</span>
<span class="go">external_iface=eno1</span>
<span class="go">internal_iface=eno2</span>
<span class="go">pxe_subnet=192.168.1</span>
<span class="go">pxe_internal_ip=$pxe_subnet.1</span>
<span class="go">pxe_subnet_mask_ip=255.255.255.0</span>
<span class="go">pxe_subnet_bitmask=16</span>
</pre></div>
</div>
</li>
<li><p class="first">Log in and get root privilege.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> sudo -s
</pre></div>
</div>
</li>
<li><p class="first">Add the <code class="docutils literal"><span class="pre">pxe-server</span></code> bundle to your Clear Linux system. This bundle has all the
files needed to run a PXE server.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> swupd bundle-add pxe-server
</pre></div>
</div>
</li>
<li><p class="first">Download the latest network-bootable release of Clear Linux and extract the
files.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> mkdir -p <span class="nv">$ipxe_root</span>
<span class="gp">#</span> curl -o /tmp/clear-pxe.tar.xz <span class="se">\</span>
<span class="go">  https://download.clearlinux.org/current/clear-$(curl \</span>
<span class="go">  https://download.clearlinux.org/latest)-pxe.tar.xz</span>
<span class="gp">#</span> tar -xJf /tmp/clear-pxe.tar.xz -C <span class="nv">$ipxe_root</span>
<span class="gp">#</span> ln -sf <span class="k">$(</span>ls <span class="nv">$ipxe_root</span> <span class="p">|</span> grep <span class="s1">&#39;org.clearlinux.*&#39;</span><span class="k">)</span> <span class="nv">$ipxe_root</span>/linux
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Ensure that the initial ramdisk file is named <code class="file docutils literal"><span class="pre">initrd</span></code> and
the kernel file is named <code class="file docutils literal"><span class="pre">linux</span></code>, which is a symbolic link to the
actual kernel file.</p>
</div>
</li>
<li><p class="first">Create an iPXE boot script with the following contents. During an iPXE
boot, the iPXE boot script directs the PXE client to download the files to
boot and install Clear Linux. Use the names previously given to the initial
ramdisk and kernel files.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> cat &gt; <span class="nv">$ipxe_root</span>/ipxe_boot_script.ipxe &lt;&lt; EOF
<span class="gp">#</span>!ipxe
<span class="go">kernel linux quiet init=/usr/lib/systemd/systemd-bootchart \</span>
<span class="go">initcall_debug tsc=reliable no_timer_check noreplace-smp rw \</span>
<span class="go">initrd=initrd</span>
<span class="go">initrd initrd</span>
<span class="go">boot</span>
<span class="go">EOF</span>
</pre></div>
</div>
</li>
<li><p class="first">The <code class="docutils literal"><span class="pre">pxe-server</span></code> bundle contains a lightweight web-server known as
<code class="docutils literal"><span class="pre">nginx</span></code>. Create a configuration file for <code class="docutils literal"><span class="pre">nginx</span></code> to serve Clear Linux to PXE
clients with the following contents:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> mkdir -p /etc/nginx/conf.d
<span class="gp">#</span> cat &gt; /etc/nginx/conf.d/<span class="nv">$ipxe_app_name</span>.conf &lt;&lt; EOF
<span class="go">server {</span>
<span class="go">  listen $ipxe_port;</span>
<span class="go">  server_name localhost;</span>
<span class="go">  location /$ipxe_app_name/ {</span>
<span class="go">    root $web_root;</span>
<span class="go">    autoindex on;</span>
<span class="go">  }</span>
<span class="go">}</span>
<span class="go">EOF</span>

<span class="gp">#</span> cp /usr/share/nginx/conf/nginx.conf.example /etc/nginx/nginx.conf
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Creating a separate configuration file for <code class="docutils literal"><span class="pre">nginx</span></code> to serve
network-bootable images on a non-standard port number preserves
existing <cite>nginx</cite> configurations.</p>
</div>
</li>
<li><p class="first">Start <code class="docutils literal"><span class="pre">nginx</span></code> and enable the startup on boot option.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> systemctl start nginx
<span class="gp">#</span> systemctl <span class="nb">enable</span> nginx
</pre></div>
</div>
</li>
<li><p class="first">The <code class="docutils literal"><span class="pre">pxe-server</span></code> bundle contains a lightweight DNS server which
conflicts with the DNS stub listener provided by <code class="docutils literal"><span class="pre">systemd-resolved</span></code>.
Disable the DNS stub listener and temporarily stop <code class="docutils literal"><span class="pre">systemd-resolved</span></code>.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> mkdir -p /etc/systemd
<span class="gp">#</span> cat &gt; /etc/systemd/resolved.conf &lt;&lt; EOF
<span class="go">[Resolve]</span>
<span class="go">DNSStubListener=no</span>
<span class="go">EOF</span>

<span class="gp">#</span> systemctl stop systemd-resolved
</pre></div>
</div>
</li>
<li><p class="first">Assign a static IP address to the network adapter for the private network
and restart <code class="docutils literal"><span class="pre">systemd-networkd</span></code> with the following commands:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> mkdir -p /etc/systemd/network
<span class="gp">#</span> cat &gt; /etc/systemd/network/70-internal-static.network &lt;&lt; EOF
<span class="go">[Match]</span>
<span class="go">Name=$internal_iface</span>
<span class="go">[Network]</span>
<span class="go">DHCP=no</span>
<span class="go">Address=$pxe_internal_ip/$pxe_subnet_bitmask</span>
<span class="go">EOF</span>

<span class="gp">#</span> systemctl restart systemd-networkd
</pre></div>
</div>
</li>
<li><p class="first">Configure NAT to route traffic from the private network to the public
network, effectively turning the PXE server into a router. To keep these
changes in spite of reboots, save the changes to the firewall with the
following commands:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> iptables -t nat -F POSTROUTING
<span class="gp">#</span> iptables -t nat -A POSTROUTING -o <span class="nv">$external_iface</span> -j MASQUERADE
<span class="gp">#</span> systemctl <span class="nb">enable</span> iptables-save.service
<span class="gp">#</span> systemctl restart iptables-save.service
<span class="gp">#</span> systemctl <span class="nb">enable</span> iptables-restore.service
<span class="gp">#</span> systemctl restart iptables-restore.service
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The firewall masks or translates packets to make them appear as
coming from the PXE server. Thus, it hides the PXE clients from the
public network.</p>
</div>
</li>
<li><p class="first">Configure the kernel to forward network packets to different
interfaces. Otherwise, NAT will not work.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> mkdir -p /etc/sysctl.d
<span class="gp">#</span> <span class="nb">echo</span> net.ipv4.ip_forward<span class="o">=</span><span class="m">1</span> &gt; /etc/sysctl.d/80-nat-forwarding.conf
<span class="gp">#</span> <span class="nb">echo</span> <span class="m">1</span> &gt; /proc/sys/net/ipv4/ip_forward
</pre></div>
</div>
</li>
<li><p class="first">The <code class="docutils literal"><span class="pre">pxe-server</span></code> bundle contains iPXE firmware images that allow computers
without an iPXE implementation to perform an iPXE boot. Create a TFTP
hosting directory and populate it with the iPXE firmware images with the
following commands:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> mkdir -p <span class="nv">$tftp_root</span>
<span class="gp">#</span> ln -sf /usr/share/ipxe/undionly.kpxe <span class="nv">$tftp_root</span>/undionly.kpxe
</pre></div>
</div>
</li>
<li><p class="first">The <code class="docutils literal"><span class="pre">pxe-server</span></code> bundle contains a lightweight TFTP, DNS, and DHCP
server known as <code class="docutils literal"><span class="pre">dnsmasq</span></code>.  Create a configuration file for <code class="docutils literal"><span class="pre">dnsmasq</span></code>
to listen on a dedicated IP address for those functions. PXE clients on
the private network will use this IP address to access those functions.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> cat &gt; /etc/dnsmasq.conf &lt;&lt; EOF
<span class="go">listen-address=$pxe_internal_ip</span>
<span class="go">EOF</span>
</pre></div>
</div>
</li>
<li><p class="first">Add the options to serve iPXE firmware images to PXE clients over TFTP to
the <code class="docutils literal"><span class="pre">dnsmasq</span></code> configuration file.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> cat &gt;&gt; /etc/dnsmasq.conf &lt;&lt; EOF
<span class="go">enable-tftp</span>
<span class="go">tftp-root=$tftp_root</span>
<span class="go">EOF</span>
</pre></div>
</div>
</li>
<li><p class="first">Add the options to host a DHCP server for PXE clients to the <code class="docutils literal"><span class="pre">dnsmasq</span></code>
configuration file.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> cat &gt;&gt; /etc/dnsmasq.conf &lt;&lt; EOF
<span class="go">dhcp-leasefile=/var/db/dnsmasq.leases</span>

<span class="go">dhcp-authoritative</span>
<span class="gp">dhcp-option=option:router,$</span>pxe_internal_ip
<span class="gp">dhcp-option=option:dns-server,$</span>pxe_internal_ip

<span class="go">dhcp-match=set:pxeclient,60,PXEClient*</span>
<span class="gp">dhcp-range=tag:pxeclient,$pxe_subnet.2,$pxe_subnet.253,$</span>pxe_subnet_mask_ip,15m
<span class="gp">dhcp-range=tag:!pxeclient,$pxe_subnet.2,$pxe_subnet.253,$</span>pxe_subnet_mask_ip,6h

<span class="go">dhcp-match=set:ipxeboot,175</span>
<span class="gp">dhcp-boot=tag:ipxeboot,http://$pxe_internal_ip:$ipxe_port/$</span>ipxe_app_name/ipxe_boot_script.ipxe
<span class="gp">dhcp-boot=tag:!ipxeboot,undionly.kpxe,$</span>pxe_internal_ip
<span class="go">EOF</span>
</pre></div>
</div>
<p>This configuration provides the following important functions:</p>
<ul class="simple">
<li>Directs PXE clients without an iPXE implementation to the TFTP server
to acquire architecture-specific iPXE firmware images that allow them
to perform an iPXE boot.</li>
<li>Activates only on the network adapter that has an IP address on the
defined subnet.</li>
<li>Directs PXE clients to the DNS server.</li>
<li>Directs PXE clients to the PXE server for routing via NAT.</li>
<li>Divides the private network into two pools of IP addresses, one for
network booting and another for usage after boot, each with their own
lease times.</li>
</ul>
</li>
<li><p class="first">Create a file where <code class="docutils literal"><span class="pre">dnsmasq</span></code> can record the IP addresses it provides
to PXE clients.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> mkdir -p /var/db
<span class="gp">#</span> touch /var/db/dnsmasq.leases
</pre></div>
</div>
</li>
<li><p class="first">Start <code class="docutils literal"><span class="pre">dnsmasq</span></code> and enable startup on boot.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> systemctl <span class="nb">enable</span> dnsmasq
<span class="gp">#</span> systemctl restart dnsmasq
</pre></div>
</div>
</li>
<li><p class="first">Start <code class="docutils literal"><span class="pre">systemd-resolved</span></code>.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> systemctl start systemd-resolved
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Using the <code class="docutils literal"><span class="pre">dnsmasq</span></code> DNS server allows <code class="docutils literal"><span class="pre">systemd-resolved</span></code> to dynamically
update the list of DNS servers for the private network from the public
network. This setup effectively creates a pass-through DNS server which
relies on the DNS servers listed in <code class="file docutils literal"><span class="pre">/etc/resolv.conf</span></code>.</p>
</div>
</li>
<li><p class="first">Power on the PXE client and watch it boot and install Clear Linux.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">After booting, Clear Linux will automatically partition the hard drive,
install itself, update to the latest version, and reboot.</p>
</div>
</li>
</ol>
<p><strong>Congratulations!</strong> You have successfully installed and configured a PXE
server that enables PXE clients to boot and install Clear Linux over the network.</p>
</div>
</div>

</div>
                  </div>
                </div>
              </div>
            </div>
           </div>
          </div>
        </div>
      </div>
      <footer id="footer">
    <div class="project-footer container clearfix">
      <span class="intel-sw-logo"></span>
      <div class="mobile-menu"></div>
                <div class="region region-footer">
    <div id="block-menu-menu-footer-menu" class="block block-menu">


  <ul class="menu"><li class="first leaf"><a href="/about/privacy-policy">Privacy Policy</a></li>
<li class="leaf"><a href="mailto:dev@lists.clearlinux.org" class="mailto">Contact us</a></li>
<li class="leaf"><a href="/about/terms-service">Terms of Service</a></li>
<li class="leaf"><a href="http://www.intel.com/content/www/us/en/legal/trademarks.html" target="_blank" class="ext">* Trademarks</a></li>
<li class="last leaf"><a href="http://www.intel.com/content/www/us/en/privacy/intel-cookie-notice.html" target="_blank" class="ext">Cookies</a></li>
</ul>
</div>
<div id="block-menu-block-1" class="block block-menu-block">


  <div class="menu-block-wrapper menu-block-1 menu-name-menu-social-media parent-mlid-0 menu-level-1">
  <ul class="menu"><li class="first leaf menu-mlid-8277"><a href="https://twitter.com/clearlinux" class="social-media icon twitter">Twitter</a></li>
<li class="leaf menu-mlid-8286"><a href="https://plus.google.com/u/2/b/110130641055512104222/110130641055512104222/posts/p/pub?_ga=1.28912252.1365239857.1461340816" class="social-media icon googleplus">Google +</a></li>
<li class="last leaf menu-mlid-8279"><a href="https://github.com/clearlinux" class="social-media icon github">Github</a></li>
</ul></div>

</div>
  </div>
    </div>
    <div class="footer-copyright">
      <small>Copyright © 2016 Intel Corporation. All rights reserved</small> <br>
      <small>*Other names and brands may be claimed as the property of others</small>
    </div>
</footer>
    </div>
    

      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../../../',
              VERSION:'0.1',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true
          };
      </script>
        <script type="text/javascript" src="../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../_static/js/affix.js"></script>
        <script type="text/javascript" src="../../../_static/js/sorttable.js"></script>
        <script type="text/javascript" src="../../../_static/js/project.js"></script>

    

    
    
      <script type="text/javascript" src="../../../_static/js/theme.js"></script>
    

    
    

     <script type="text/javascript">
    jQuery(function() { Search.loadIndex("../../../searchindex.js"); });
    </script>
    
    <script type="text/javascript" id="searchindexloader"></script>
  
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-61272224-1', 'auto');
  ga('send', 'pageview');
  </script>
   
</body>
</html>
