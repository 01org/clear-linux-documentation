<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Block Storage &mdash; ClearLinux Documentation 1.0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="ClearLinux Documentation 1.0.1 documentation" href="index.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="block-storage">
<span id="openstack-block-storage"></span><h1>Block Storage<a class="headerlink" href="#block-storage" title="Permalink to this headline">¶</a></h1>
<p>The OpenStack Block Storage service (cinder) adds persistent storage to
a virtual machine. Block Storage provides an infrastructure for managing
volumes, and interacts with OpenStack Compute to provide volumes for
instances. The service also enables management of volume snapshots, and
volume types.</p>
<div class="section" id="install-and-configure-controller-node">
<h2>Install and configure controller node<a class="headerlink" href="#install-and-configure-controller-node" title="Permalink to this headline">¶</a></h2>
<p>This section describes how to install and configure the Block
Storage service, code-named cinder, on the controller node. This
service requires at least one additional storage node that provides
volumes to instances.</p>
<div class="section" id="prerequisites">
<h3>Prerequisites:<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h3>
<p>Before you install and configure the Block Storage service, you</p>
<ol class="arabic">
<li><p class="first">To create the database, complete these steps:</p>
<ul>
<li><p class="first">Use the database access client to connect to the database
server as the <code class="docutils literal"><span class="pre">root</span></code> user:</p>
<div class="highlight-python"><div class="highlight"><pre>$ mysql -u root -p
</pre></div>
</div>
</li>
<li><p class="first">Create the <code class="docutils literal"><span class="pre">cinder</span></code> database:</p>
<div class="highlight-python"><div class="highlight"><pre>CREATE DATABASE cinder;
</pre></div>
</div>
</li>
<li><p class="first">Grant proper access to the <code class="docutils literal"><span class="pre">cinder</span></code> database:</p>
<div class="highlight-python"><div class="highlight"><pre>GRANT ALL PRIVILEGES ON cinder.* TO &#39;cinder&#39;@&#39;localhost&#39; \
  IDENTIFIED BY &#39;CINDER_DBPASS&#39;;
GRANT ALL PRIVILEGES ON cinder.* TO &#39;cinder&#39;@&#39;%&#39; \
  IDENTIFIED BY &#39;CINDER_DBPASS&#39;;
</pre></div>
</div>
<p>Replace <code class="docutils literal"><span class="pre">CINDER_DBPASS</span></code> with a suitable password.</p>
</li>
<li><p class="first">Exit the database access client.</p>
</li>
</ul>
</li>
<li><p class="first">Source the <code class="docutils literal"><span class="pre">admin</span></code> credentials to gain access to admin-only
CLI commands:</p>
<div class="highlight-python"><div class="highlight"><pre>$ source admin-openrc.sh
</pre></div>
</div>
</li>
<li><p class="first">To create the service credentials, complete these steps:</p>
<ul>
<li><p class="first">Create a <code class="docutils literal"><span class="pre">cinder</span></code> user:</p>
<div class="highlight-python"><div class="highlight"><pre>$ openstack user create --domain default --password-prompt cinder
User Password:
Repeat User Password:
+-----------+----------------------------------+
| Field     | Value                            |
+-----------+----------------------------------+
| domain_id | default                          |
| enabled   | True                             |
| id        | bb279f8ffc444637af38811a5e1f0562 |
| name      | cinder                           |
+-----------+----------------------------------+
</pre></div>
</div>
</li>
<li><p class="first">Add the <code class="docutils literal"><span class="pre">admin</span></code> role to the <code class="docutils literal"><span class="pre">cinder</span></code> user:</p>
<div class="highlight-python"><div class="highlight"><pre>$ openstack role add --project service --user cinder admin
</pre></div>
</div>
</li>
<li><p class="first">Create the <code class="docutils literal"><span class="pre">cinder</span></code> and <code class="docutils literal"><span class="pre">cinderv2</span></code> service entities:</p>
<div class="highlight-python"><div class="highlight"><pre>$ openstack service create --name cinder \
  --description &quot;OpenStack Block Storage&quot; volume
+-------------+----------------------------------+
| Field       | Value                            |
+-------------+----------------------------------+
| description | OpenStack Block Storage          |
| enabled     | True                             |
| id          | ab3bbbef780845a1a283490d281e7fda |
| name        | cinder                           |
| type        | volume                           |
+-------------+----------------------------------+

$ openstack service create --name cinderv2 \
  --description &quot;OpenStack Block Storage&quot; volumev2
+-------------+----------------------------------+
| Field       | Value                            |
+-------------+----------------------------------+
| description | OpenStack Block Storage          |
| enabled     | True                             |
| id          | eb9fd245bdbc414695952e93f29fe3ac |
| name        | cinderv2                         |
| type        | volumev2                         |
+-------------+----------------------------------+
</pre></div>
</div>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The Block Storage services requires two service entities.</p>
</div>
</li>
<li><p class="first">Create the Block Storage service API endpoints:</p>
<div class="highlight-python"><div class="highlight"><pre>$ openstack endpoint create --region RegionOne \
  volume public http://controller:8776/v1/%\(tenant_id\)s
+--------------+-----------------------------------------+
| Field        | Value                                   |
+--------------+-----------------------------------------+
| enabled      | True                                    |
| id           | 03fa2c90153546c295bf30ca86b1344b        |
| interface    | public                                  |
| region       | RegionOne                               |
| region_id    | RegionOne                               |
| service_id   | ab3bbbef780845a1a283490d281e7fda        |
| service_name | cinder                                  |
| service_type | volume                                  |
| url          | http://controller:8776/v1/%(tenant_id)s |
+--------------+-----------------------------------------+

$ openstack endpoint create --region RegionOne \
  volume internal http://controller:8776/v1/%\(tenant_id\)s
+--------------+-----------------------------------------+
| Field        | Value                                   |
+--------------+-----------------------------------------+
| enabled      | True                                    |
| id           | 94f684395d1b41068c70e4ecb11364b2        |
| interface    | internal                                |
| region       | RegionOne                               |
| region_id    | RegionOne                               |
| service_id   | ab3bbbef780845a1a283490d281e7fda        |
| service_name | cinder                                  |
| service_type | volume                                  |
| url          | http://controller:8776/v1/%(tenant_id)s |
+--------------+-----------------------------------------+

$ openstack endpoint create --region RegionOne \
  volume admin http://controller:8776/v1/%\(tenant_id\)s
+--------------+-----------------------------------------+
| Field        | Value                                   |
+--------------+-----------------------------------------+
| enabled      | True                                    |
| id           | 4511c28a0f9840c78bacb25f10f62c98        |
| interface    | admin                                   |
| region       | RegionOne                               |
| region_id    | RegionOne                               |
| service_id   | ab3bbbef780845a1a283490d281e7fda        |
| service_name | cinder                                  |
| service_type | volume                                  |
| url          | http://controller:8776/v1/%(tenant_id)s |
+--------------+-----------------------------------------+

$ openstack endpoint create --region RegionOne \
  volumev2 public http://controller:8776/v2/%\(tenant_id\)s
+--------------+-----------------------------------------+
| Field        | Value                                   |
+--------------+-----------------------------------------+
| enabled      | True                                    |
| id           | 513e73819e14460fb904163f41ef3759        |
| interface    | public                                  |
| region       | RegionOne                               |
| region_id    | RegionOne                               |
| service_id   | eb9fd245bdbc414695952e93f29fe3ac        |
| service_name | cinderv2                                |
| service_type | volumev2                                |
| url          | http://controller:8776/v2/%(tenant_id)s |
+--------------+-----------------------------------------+

$ openstack endpoint create --region RegionOne \
  volumev2 internal http://controller:8776/v2/%\(tenant_id\)s
+--------------+-----------------------------------------+
| Field        | Value                                   |
+--------------+-----------------------------------------+
| enabled      | True                                    |
| id           | 6436a8a23d014cfdb69c586eff146a32        |
| interface    | internal                                |
| region       | RegionOne                               |
| region_id    | RegionOne                               |
| service_id   | eb9fd245bdbc414695952e93f29fe3ac        |
| service_name | cinderv2                                |
| service_type | volumev2                                |
| url          | http://controller:8776/v2/%(tenant_id)s |
+--------------+-----------------------------------------+

$ openstack endpoint create --region RegionOne \
  volumev2 admin http://controller:8776/v2/%\(tenant_id\)s
+--------------+-----------------------------------------+
| Field        | Value                                   |
+--------------+-----------------------------------------+
| enabled      | True                                    |
| id           | e652cf84dd334f359ae9b045a2c91d96        |
| interface    | admin                                   |
| region       | RegionOne                               |
| region_id    | RegionOne                               |
| service_id   | eb9fd245bdbc414695952e93f29fe3ac        |
| service_name | cinderv2                                |
| service_type | volumev2                                |
| url          | http://controller:8776/v2/%(tenant_id)s |
+--------------+-----------------------------------------+
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The Block Storage services requires endpoints for each service
entity.</p>
</div>
</li>
</ol>
</div>
<div class="section" id="install-and-configure-components">
<h3>Install and configure components<a class="headerlink" href="#install-and-configure-components" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">Install OpenStack Block Storage Controller bundle:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># swupd bundle-add openstack-block-storage-controller</span>
<span class="c"># swupd verify --fix</span>
</pre></div>
</div>
</li>
<li><p class="first">Custom configurations will be located at <code class="docutils literal"><span class="pre">/etc/cinder</span></code>.</p>
<ul>
<li><p class="first">Create <code class="docutils literal"><span class="pre">/etc/cinder</span></code> directory:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">mkdir</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">cinder</span>
</pre></div>
</div>
</li>
<li><p class="first">Create empty cinder configuration file in
<code class="docutils literal"><span class="pre">/etc/cinder/cinder.conf</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">touch</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">cinder</span><span class="o">/</span><span class="n">cinder</span><span class="o">.</span><span class="n">conf</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p class="first">Edit the <code class="docutils literal"><span class="pre">/etc/cinder/cinder.conf</span></code> file and complete the following
actions:</p>
<ul>
<li><p class="first">In the <code class="docutils literal"><span class="pre">[database]</span></code> section, configure database access. Replace
<code class="docutils literal"><span class="pre">CINDER_DBPASS</span></code> with the password you chose for the
database:</p>
<div class="highlight-python"><div class="highlight"><pre>[database]
...
connection=mysql://cinder:CINDER_DBPASS@controller/cinder
</pre></div>
</div>
</li>
<li><p class="first">In the <code class="docutils literal"><span class="pre">[DEFAULT]</span></code> and <code class="docutils literal"><span class="pre">[oslo_messaging_rabbit]</span></code> section,
configure RabbitMQ message queue access. Replace <code class="docutils literal"><span class="pre">RABBIT_PASS</span></code>
with the password you chose for the account in
RabbitMQ:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="n">DEFAULT</span><span class="p">]</span>
<span class="o">...</span>
<span class="n">rpc_backend</span> <span class="o">=</span> <span class="n">rabbit</span>

<span class="p">[</span><span class="n">oslo_messaging_rabbit</span><span class="p">]</span>
<span class="o">...</span>
<span class="n">rabbit_host</span> <span class="o">=</span> <span class="n">controller</span>
<span class="n">rabbit_userid</span> <span class="o">=</span> <span class="n">openstack</span>
<span class="n">rabbit_password</span> <span class="o">=</span> <span class="n">RABBIT_PASS</span>
</pre></div>
</div>
</li>
<li><p class="first">In the <code class="docutils literal"><span class="pre">[DEFAULT]</span></code> and <code class="docutils literal"><span class="pre">[keystone_authtoken]</span></code> sections, configure
Identity service access. Replace <code class="docutils literal"><span class="pre">CINDER_PASS</span></code> with the password you
chose for the <code class="docutils literal"><span class="pre">cinder</span></code> user in the Identity service.:</p>
<div class="highlight-python"><div class="highlight"><pre>[DEFAULT]
...
auth_strategy = keystone

[keystone_authtoken]
...
auth_uri = http://controller:5000
auth_url = http://controller:35357
auth_plugin = password
project_domain_id = default
user_domain_id = default
project_name = service
username = cinder
password = CINDER_PASS
</pre></div>
</div>
</li>
<li><p class="first">In the <code class="docutils literal"><span class="pre">[DEFAULT]</span></code> section, configure the <code class="docutils literal"><span class="pre">my_ip</span></code> option to
use the management interface IP address of the controller node:</p>
<div class="highlight-python"><div class="highlight"><pre>[DEFAULT]
...
my_ip = 10.0.0.11
</pre></div>
</div>
</li>
</ul>
</li>
<li><p class="first">Populate the Block Storage database:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># su -s /bin/sh -c &quot;cinder-manage db sync&quot; cinder</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="configure-compute-to-use-block-storage">
<h3>Configure Compute to use Block Storage<a class="headerlink" href="#configure-compute-to-use-block-storage" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Edit the <code class="docutils literal"><span class="pre">/etc/nova/nova.conf</span></code> file and add the following
to it:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="n">cinder</span><span class="p">]</span>
<span class="n">os_region_name</span> <span class="o">=</span> <span class="n">RegionOne</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="finalize-installation">
<h3>Finalize installation<a class="headerlink" href="#finalize-installation" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">Restart the Compute API service:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># systemctl restart uwsgi@nova-api.service</span>
</pre></div>
</div>
</li>
<li><p class="first">Start the Block Storage services and configure them to start when
the system boots:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># systemctl enable cinder-api cinder-scheduler</span>
<span class="c"># systemctl start cinder-api cinder-scheduler</span>
</pre></div>
</div>
</li>
</ol>
</div>
</div>
<div class="section" id="install-and-configure-a-storage-node">
<h2>Install and configure a storage node<a class="headerlink" href="#install-and-configure-a-storage-node" title="Permalink to this headline">¶</a></h2>
<p>This section describes how to install and configure storage nodes
for the Block Storage service. For simplicity, this configuration
references one storage node with an empty local block storage device.
The instructions use <code class="docutils literal"><span class="pre">/dev/sdb</span></code>, but you can substitute a different
value for your particular node.</p>
<p>The service provisions logical volumes on this device using the
LVM driver and provides them to instances via iSCSI transport.
You can follow these instructions with minor modifications to
horizontally scale your environment with additional storage nodes.</p>
<div class="section" id="id1">
<h3>Prerequisites<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">Install the openstack block storage bundle:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># swupd bundle-add openstack-block-storage</span>
<span class="c"># swupd verify --fix</span>
</pre></div>
</div>
</li>
<li><p class="first">Create the LVM physical volume: <code class="docutils literal"><span class="pre">/dev/sdb1</span></code> If your system uses a
different device name, adjust these steps accordingly:</p>
<div class="highlight-python"><div class="highlight"><pre># pvcreate /dev/sdb1
Physical volume &quot;/dev/sdb1&quot; successfully created
</pre></div>
</div>
</li>
<li><p class="first">Create the LVM volume group <code class="docutils literal"><span class="pre">cinder-volumes</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre># vgcreate cinder-volumes /dev/sdb1
Volume group &quot;cinder-volumes&quot; successfully created
</pre></div>
</div>
<p>The Block Storage service creates logical volumes in this volume
group.</p>
</li>
<li><p class="first">Only instances can access Block Storage volumes. However, the
underlying operating system manages the devices associated with the
volumes. By default, the LVM volume scanning tool scans the <code class="docutils literal"><span class="pre">/dev</span></code>
directory for block storage devices that contain volumes. If projects
use LVM on their volumes, the scanning tool detects these volumes and
attempts to cache them which can cause a variety of problems with
both the underlying operating system and project volumes. You must
reconfigure LVM to scan only the devices that contain the
<code class="docutils literal"><span class="pre">cinder-volume</span></code> volume group. Edit the <code class="docutils literal"><span class="pre">/etc/lvm/lvm.conf</span></code> file
and complete the following action:</p>
<ul>
<li><p class="first">In the <code class="docutils literal"><span class="pre">devices</span></code> section, add a filter that accepts the
<code class="docutils literal"><span class="pre">/dev/sdb</span></code> device and rejects all other devices:</p>
<div class="highlight-python"><div class="highlight"><pre>devices {
filter = [ &quot;a/sdb/&quot;, &quot;r/.*/&quot;]
}
</pre></div>
</div>
</li>
</ul>
</li>
</ol>
</div>
<div class="section" id="id2">
<h3>Install and configure components<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">Edit the <code class="docutils literal"><span class="pre">/etc/cinder/cinder.conf</span></code> file and complete the following
actions:</p>
<ul>
<li><p class="first">In the <code class="docutils literal"><span class="pre">[database]</span></code> section, configure database access. Replace
<code class="docutils literal"><span class="pre">CINDER_DBPASS</span></code> with the password you chose for the Block Storage
database:</p>
<div class="highlight-python"><div class="highlight"><pre>[database]
...
connection = mysql://cinder:CINDER_DBPASS@controller/cinder
</pre></div>
</div>
</li>
<li><p class="first">In the <code class="docutils literal"><span class="pre">[DEFAULT]</span></code> and <code class="docutils literal"><span class="pre">[oslo_messaging_rabbit]</span></code> sections,
configure <code class="docutils literal"><span class="pre">RabbitMQ</span></code> message queue access. Replace <code class="docutils literal"><span class="pre">RABBIT_PASS</span></code>
with the password you chose for the openstack account in
<code class="docutils literal"><span class="pre">RabbitMQ</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="n">DEFAULT</span><span class="p">]</span>
<span class="o">...</span>
<span class="n">rpc_backend</span> <span class="o">=</span> <span class="n">rabbit</span>

<span class="p">[</span><span class="n">oslo_messaging_rabbit</span><span class="p">]</span>
<span class="o">...</span>
<span class="n">rabbit_host</span> <span class="o">=</span> <span class="n">controller</span>
<span class="n">rabbit_userid</span> <span class="o">=</span> <span class="n">openstack</span>
<span class="n">rabbit_password</span> <span class="o">=</span> <span class="n">RABBIT_PASS</span>
</pre></div>
</div>
</li>
<li><p class="first">In the <code class="docutils literal"><span class="pre">[DEFAULT]</span></code> and <code class="docutils literal"><span class="pre">[keystone_authtoken]</span></code> sections,
configure Identity service access. Replace <code class="docutils literal"><span class="pre">CINDER_PASS</span></code> with the
password you chose for the cinder user in the Identity service:</p>
<div class="highlight-python"><div class="highlight"><pre>[DEFAULT]
...
auth_strategy = keystone

[keystone_authtoken]
...
auth_uri = http://controller:5000
auth_url = http://controller:35357
auth_plugin = password
project_domain_id = default
user_domain_id = default
project_name = service
username = cinder
password = CINDER_PASS
</pre></div>
</div>
</li>
<li><p class="first">In the <code class="docutils literal"><span class="pre">[DEFAULT]</span></code> section, configure the <code class="docutils literal"><span class="pre">my_ip</span></code> option.
Replace <code class="docutils literal"><span class="pre">MANAGEMENT_INTERFACE_IP_ADDRESS</span></code> with the IP address
of the management network interface on your storage node,
typically 10.0.0.41 for the first node in the example
architecture:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="n">DEFAULT</span><span class="p">]</span>
<span class="o">...</span>
<span class="n">my_ip</span> <span class="o">=</span> <span class="n">MANAGEMENT_INTERFACE_IP_ADDRESS</span>
</pre></div>
</div>
</li>
<li><p class="first">In the <code class="docutils literal"><span class="pre">[lvm]</span></code> section, configure the LVM back end with the LVM
driver, <code class="docutils literal"><span class="pre">cinder-volumes</span></code> volume group, iSCSI protocol, and
appropriate iSCSI service:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="n">lvm</span><span class="p">]</span>
<span class="o">...</span>
<span class="n">volume_driver</span> <span class="o">=</span> <span class="n">cinder</span><span class="o">.</span><span class="n">volume</span><span class="o">.</span><span class="n">drivers</span><span class="o">.</span><span class="n">lvm</span><span class="o">.</span><span class="n">LVMVolumeDriver</span>
<span class="n">volume_group</span> <span class="o">=</span> <span class="n">cinder</span><span class="o">-</span><span class="n">volumes</span>
<span class="n">iscsi_protocol</span> <span class="o">=</span> <span class="n">iscsi</span>
<span class="n">iscsi_helper</span> <span class="o">=</span> <span class="n">tgtadm</span>
</pre></div>
</div>
</li>
<li><p class="first">In the <code class="docutils literal"><span class="pre">[DEFAULT]</span></code> section, enable the LVM back end:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="n">DEFAULT</span><span class="p">]</span>
<span class="o">...</span>
<span class="n">enabled_backends</span> <span class="o">=</span> <span class="n">lvm</span>
</pre></div>
</div>
</li>
<li><p class="first">In the <code class="docutils literal"><span class="pre">[DEFAULT]</span></code> section, configure the location of the Image
service:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="n">DEFAULT</span><span class="p">]</span>
<span class="o">...</span>
<span class="n">glance_host</span> <span class="o">=</span> <span class="n">controller</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p class="first">Let systemd set the correct permissions for files in <code class="docutils literal"><span class="pre">/etc/cinder</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># systemctl restart update-triggers.target</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="id3">
<h3>Finalize installation<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">Start the Block Storage volume service including its dependencies
and configure them to start when the system boots:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># systemctl enable iscsid tgtd cinder-volume</span>
<span class="c"># systemctl start iscsid tgtd cinder-volume</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="configuring-a-compute-node-to-use-block-storage">
<h3>Configuring a compute node to use Block Storage<a class="headerlink" href="#configuring-a-compute-node-to-use-block-storage" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">Perform the following steps to enable a compute node to work with
block storage:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># systemctl enable iscsid</span>
<span class="c"># systemctl start iscsi-gen-initiatorname iscsid</span>
</pre></div>
</div>
</li>
</ol>
</div>
</div>
<div class="section" id="verify-operation">
<h2>Verify operation<a class="headerlink" href="#verify-operation" title="Permalink to this headline">¶</a></h2>
<p>Verify operation of the Block Storage service.</p>
<ol class="arabic">
<li><p class="first">Source the <code class="docutils literal"><span class="pre">admin</span></code> credentials to gain access to
admin-only CLI commands:</p>
<div class="highlight-python"><div class="highlight"><pre>$ source admin-openrc.sh
</pre></div>
</div>
</li>
<li><p class="first">List service components to verify successful launch of each process:</p>
<div class="highlight-python"><div class="highlight"><pre>$ cinder service-list
+------------------+------------+------+---------+-------+----------------------------+-----------------+
|      Binary      |    Host    | Zone |  Status | State |         Updated_at         | Disabled Reason |
+------------------+------------+------+---------+-------+----------------------------+-----------------+
| cinder-scheduler | controller | nova | enabled |   up  | 2014-10-18T01:30:54.000000 |       None      |
| cinder-volume    | block1@lvm | nova | enabled |   up  | 2014-10-18T01:30:57.000000 |       None      |
+------------------+------------+------+---------+-------+----------------------------+-----------------+
</pre></div>
</div>
</li>
</ol>
<p>Next topic: <a class="reference internal" href="openstack_dashboard.html#openstack-dashboard"><span>Dashboard</span></a>.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Block Storage</a><ul>
<li><a class="reference internal" href="#install-and-configure-controller-node">Install and configure controller node</a><ul>
<li><a class="reference internal" href="#prerequisites">Prerequisites:</a></li>
<li><a class="reference internal" href="#install-and-configure-components">Install and configure components</a></li>
<li><a class="reference internal" href="#configure-compute-to-use-block-storage">Configure Compute to use Block Storage</a></li>
<li><a class="reference internal" href="#finalize-installation">Finalize installation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#install-and-configure-a-storage-node">Install and configure a storage node</a><ul>
<li><a class="reference internal" href="#id1">Prerequisites</a></li>
<li><a class="reference internal" href="#id2">Install and configure components</a></li>
<li><a class="reference internal" href="#id3">Finalize installation</a></li>
<li><a class="reference internal" href="#configuring-a-compute-node-to-use-block-storage">Configuring a compute node to use Block Storage</a></li>
</ul>
</li>
<li><a class="reference internal" href="#verify-operation">Verify operation</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/openstack_block_storage.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2015, Intel OTC.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.6</a>
      
      |
      <a href="_sources/openstack_block_storage.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>